---
title: "Step 0 Clean ExpiWell Data - SONA W1"
author: "Hayleigh Armstrong & Jess Lougheed"
date: "Last compiled on `r format(Sys.time(), '%d %B, %Y')`"
output:
  html_document:
    number_sections: yes
    toc: yes
    toc_depth: 3
    toc_float: yes
---

## Preliminary Steps

Load packages

```{r, warnings = FALSE, message = FALSE, include = FALSE}
library(tidyverse)
library(psych)
```

Read in the data:
```{r}
#File path on Hayleigh's Mac
# df <- read.csv("/Volumes/Emotion Dynamics Lab/PEARS/Data/SEEDS/PEARS_SEEDS_Demographics___Daily_Surveys_SONA_W1/Demographics_SONA_numeric.csv", na.strings=c("","NA"))

# File path on Jess's Mac
#df <- read.csv(""/Volumes/Emotion Dynamics Lab/PEARS/Data/SEEDS/PEARS_SEEDS_Demographics___Daily_Surveys_SONA_W1/Demographics_SONA_numeric.csv", na.strings=c("", "NA"))

df <- as.data.frame(df)

```

Remove the pilot data and other problem response sets:
```{r}
df = filter(df, !(X.5 %in% c("5f7e34451bbd0d2c6bca2c6d",
                             "62bb560992331d0dde4bf21a",
                             "6145093612819202d9ddbe9d",
                             "6350d2b2662e7e0b4403e03b",
                             "6350f1b5446f650b44e98adf",
                             "63c70a2ec250ac43a2190522",
                             "63c78e41c250ac43a2197a89"
                            )))

df = filter(df, !(X.5 %in% "636ab12fd258f30b434742bc" & X.1 %in% "11/08/2022 05:02PM"))

#Participants "5f7e34451bbd0d2c6bca2c6d","62bb560992331d0dde4bf21a", "6145093612819202d9ddbe9d" are all pilot data. 

#Participant 6350d2b2662e7e0b4403e03b all messed up (eg BDI irritability has response about crying, numeric shifts to text) 
#Participants 6350f1b5446f650b44e98adf and 63c70a2ec250ac43a2190522 did the survey in Jan (cutoff in Nov) 

#Participant 63c78e41c250ac43a2197a89 requested data to be removed

#Participant 636ab12fd258f30b434742bc had two sets of responses, removed second (by timestamp)

```

Remove extra columns:
```{r}

cols_remove <- c("X.6", "X.7")
df <- df[, !(colnames(df) %in% cols_remove)]
```

## Save the data file

Save the data file. This is the file to read in to all Term 1 Step 1 ExpiWell variable preparation scripts.
```{r, eval = FALSE}
#On Enya's Mac:
write.csv(df,'/Volumes/Emotion Dynamics Lab/DREAMS (UGS2)/Data/Part 1/Term 1 Data/DREAMS ExpiWell Data Cleaned.csv')

# On Jess's Mac:
#write.csv(df,'/Volumes/research/Emotion Dynamics Lab/DREAMS (UGS2)/Data/Part 1/Term 1 Data/DREAMS ExpiWell Data Cleaned.csv')
```
